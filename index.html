<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>챔피언 추첨기</title>
  <link rel="preconnect" href="https://ddragon.leagueoflegends.com">
  
  <!-- CSS 파일들 -->
  <link rel="stylesheet" href="./css/main.css" />
  <link rel="stylesheet" href="./css/modal.css" />
  <link rel="stylesheet" href="./css/game.css" />
  <link rel="stylesheet" href="./css/ten-player.css" />
</head>
<body>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  
  <script>
    // Firebase 설정
    const firebaseConfig = {
      apiKey: "AIzaSyAPzVq3PV5ppJijFD3CQJv3HIJSFQn-rVM",
      authDomain: "lol-randomchampion-default-rtdb.firebaseio.com",
      databaseURL: "https://lol-randomchampion-default-rtdb.firebaseio.com",
      projectId: "lol-randomchampion",
      storageBucket: "lol-randomchampion.appspot.com",
      messagingSenderId: "558228597015",
      appId: "1:558228597015:web:e1b8a2f77fa3ba9e6f4d6b"
    };
    
    // Firebase 초기화
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    
    // 전역으로 노출
    window.db = db;
  </script>

  <!-- 시작 화면 -->
  <div id="welcomeScreen" style="display: flex; width: 100%; height: 100%; align-items: center; justify-content: center;">
    <div style="max-width: 600px; margin: 0 auto; padding: 2rem;">
      <div class="panel text-center">
        <h1 style="margin-bottom: 2rem; color: var(--accent);">🎮 랜덤 챔피언 밴픽</h1>
        <p class="text-muted" style="margin-bottom: 2rem;">
          친구들과 함께 사용자 설정 랜덤 챔피언을 뽑고 밴을 정해보세요!<br>
          공정한 랜덤 시스템으로 더욱 재미있는 게임을 즐겨보세요.
        </p>
        
        <div style="display: flex; flex-direction: column; gap: 1rem; max-width: 300px; margin: 0 auto;">
          <button id="createRoomBtn" class="btn primary">새 방 만들기</button>
          
          <div style="display: flex; align-items: center; gap: 0.5rem;">
            <div style="flex: 1; height: 1px; background: var(--divider);"></div>
            <span class="text-muted" style="font-size: 0.9rem;">또는</span>
            <div style="flex: 1; height: 1px; background: var(--divider);"></div>
          </div>
          
          <div style="display: flex; gap: 0.5rem;">
            <input id="joinRoomCode" type="text" class="input" placeholder="초대 코드" style="flex: 1; min-width: auto;">
            <button id="joinRoomBtn" class="btn">참가하기</button>
          </div>
        </div>
      </div>
      
      <div class="logo">
        <img src="img/chzzk_logo.webp" alt="chzzk.logo" />
        <p>개발자 스트리머 액체</p>
        </div>
    </div>
  </div>

  <!-- 게임 화면 -->
  <div id="gameScreen" style="display: none;">
    <!-- 헤더 -->
    <header class="app-header">
      <h1>랜덤 챔피언 밴픽</h1>
      <div style="display: flex; align-items: center; gap: 1rem;">
        <div id="roomInfo" class="room-info"></div>
        <button id="copyRoomLinkBtn" class="btn ghost sm">링크 복사</button>
        <button id="leaveRoomBtn" class="btn danger sm">방 나가기</button>
      </div>
    </header>

    <!-- 메인 레이아웃: 10명 플레이어 구조 -->
    <main class="ten-player-layout">
      <!-- 1팀 (좌측) -->
      <section class="team-section team1-section" data-team="team1">
        <h2 class="team-title">1팀</h2>
        <div class="player-slots">
          <div class="player-slot" data-team="team1" data-slot="1">
            <div class="player-info">
              <span class="player-name">플레이어1</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll" title="리롤 토글">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team1" data-slot="2">
            <div class="player-info">
              <span class="player-name">플레이어2</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team1" data-slot="3">
            <div class="player-info">
              <span class="player-name">플레이어3</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team1" data-slot="4">
            <div class="player-info">
              <span class="player-name">플레이어4</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team1" data-slot="5">
            <div class="player-info">
              <span class="player-name">플레이어5</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
        </div>
      </section>

      <!-- 2팀 (우측) -->
      <section class="team-section team2-section" data-team="team2">
        <h2 class="team-title">2팀</h2>
        <div class="player-slots">
          <div class="player-slot" data-team="team2" data-slot="1">
            <div class="player-info">
              <span class="player-name">플레이어1</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team2" data-slot="2">
            <div class="player-info">
              <span class="player-name">플레이어2</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team2" data-slot="3">
            <div class="player-info">
              <span class="player-name">플레이어3</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team2" data-slot="4">
            <div class="player-info">
              <span class="player-name">플레이어4</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
          <div class="player-slot" data-team="team2" data-slot="5">
            <div class="player-info">
              <span class="player-name">플레이어5</span>
              <div class="player-ban" title="밴 설정/해제">
                <span class="ban-icon">🚫</span>
              </div>
            </div>
            <div class="player-actions">
              <button class="btn-reroll">리롤</button>
            </div>
          </div>
        </div>
      </section>

      <!-- 중앙: 챔피언 풀과 컨트롤 -->
      <section class="center-section panel">
        <h2>챔피언 풀</h2>
        
        <!-- 호스트 전용 컨트롤 -->
        <div id="hostControls" class="host-controls" style="display: none;">
          <div class="control-buttons">
            <button id="forceRollBtn" class="btn primary">전체 리롤</button>
            <button id="forceTeam1Btn" class="btn">팀1 리롤</button>
            <button id="forceTeam2Btn" class="btn">팀2 리롤</button>
          </div>
        </div>

        <!-- 팀별 챔피언 목록 -->
        <div class="champion-pools">
          <div class="team-pool">
            <h3>1팀 챔피언 목록</h3>
            <div id="team1Pool" class="champion-grid"></div>
          </div>
          <div class="team-pool">
            <h3>2팀 챔피언 목록</h3>
            <div id="team2Pool" class="champion-grid"></div>
          </div>
        </div>
        
        <div id="versionInfo" class="version-info"></div>
      </section>
    </main>

    <!-- 추방존 -->
    <div id="kickZone" class="kick-zone" style="display: none;">
      <div class="kick-zone-content">
        <div class="kick-icon">🚫</div>
        <div class="kick-text">플레이어 추방</div>
        <div class="kick-hint">여기에 드롭하여 추방</div>
      </div>
    </div>
  </div>

  <!-- 밴 선택 모달 -->
  <div id="banModal" class="modal ban-modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3>밴할 챔피언 선택</h3>
        <button class="close-btn" id="closeBanModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="champion-search">
          <input type="text" id="banSearchInput" placeholder="챔피언 이름 검색..." autocomplete="off">
        </div>
        <div id="banChampionGrid" class="champion-select-grid"></div>
      </div>
    </div>
  </div>

  <!-- 플레이어 추방 확인 모달 -->
  <div id="kickModal" class="modal kick-modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3>플레이어 추방</h3>
        <button class="close-btn" id="closeKickModal">&times;</button>
      </div>
      <div class="modal-body">
        <p>정말로 <span id="kickPlayerName"></span>님을 추방하시겠습니까?</p>
        <div class="modal-actions">
          <button id="confirmKickBtn" class="btn danger">추방</button>
          <button id="cancelKickBtn" class="btn ghost">취소</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript 파일들 -->
  <script src="./js/utils.js"></script>
  <script src="./js/datadragon.js"></script>
  <script src="./js/modals.js"></script>
  <script src="./js/ten-player-ui.js"></script>
  <script src="./js/game-manager.js"></script>
  <script src="./js/main.js"></script>
</body>
</html>
